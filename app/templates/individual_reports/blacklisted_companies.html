{% extends "individual_reports/base_individual_report.html" %}

{% block service_title %}Blacklisted Companies and Vessels{% endblock %}
{% block service_icon %}fas fa-ban{% endblock %}

{% block report_content %}
<!-- Search Parameters -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card border-0 shadow-sm">
            <div class="card-body">
                <h5 class="card-title mb-3">
                    <i class="fas fa-search text-primary me-2"></i>Search Parameters
                </h5>
                <div class="row">
                    <div class="col-md-6">
                        <strong>Entity Name:</strong> 
                        {% if blacklisted_companies_data.search_params and blacklisted_companies_data.search_params.entity_name %}
                            {{ blacklisted_companies_data.search_params.entity_name }}
                        {% elif blacklisted_companies_data.entity_name %}
                            {{ blacklisted_companies_data.entity_name }}
                        {% elif form_data and form_data.entity_name %}
                            {{ form_data.entity_name }}
                        {% else %}
                            N/A
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Results Summary -->
{% if blacklisted_companies_data and blacklisted_companies_data.results_summary %}
<div class="row mb-4">
    <div class="col-12">
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>{{ blacklisted_companies_data.results_summary }}
        </div>
    </div>
</div>
{% endif %}

<!-- Error Handling -->
{% if blacklisted_companies_data and blacklisted_companies_data.error %}
<div class="row">
    <div class="col-12">
        <div class="alert alert-danger">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <strong>Error:</strong> {{ blacklisted_companies_data.error }}
        </div>
    </div>
</div>
{% elif blacklisted_companies_data %}
<!-- Results Statistics -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card bg-primary text-white">
            <div class="card-body text-center">
                <i class="fas fa-ban fa-2x mb-2"></i>
                <h4>{{ blacklisted_companies_data.total_entities or 0 }}</h4>
                <p class="mb-0">Blacklisted Entities</p>
            </div>
        </div>
    </div>
    {% if blacklisted_companies_data.pagination and blacklisted_companies_data.pagination.has_pagination %}
    <div class="col-md-3">
        <div class="card bg-info text-white">
            <div class="card-body text-center">
                <i class="fas fa-file-alt fa-2x mb-2"></i>
                <h4>{{ blacklisted_companies_data.pagination.total_pages or 1 }}</h4>
                <p class="mb-0">Total Pages</p>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<!-- Blacklisted Entities List -->
{% if blacklisted_companies_data.blacklisted_entities %}
<div class="row">
    <div class="col-12">
        <h4 class="mb-4">
            <i class="fas fa-list text-primary me-2"></i>Blacklisted Entities
        </h4>
        
        <div class="row">
            {% for entity in blacklisted_companies_data.blacklisted_entities %}
            <div class="col-md-6 mb-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body">
                        <h5 class="card-title text-danger">
                            <i class="fas fa-ban me-2"></i>{{ entity.name }}
                        </h5>
                        
                        {% if entity.blacklisted_by %}
                        <div class="mb-3">
                            <strong class="text-muted">Blacklisted by:</strong>
                            <span class="badge bg-danger">{{ entity.blacklisted_by }}</span>
                        </div>
                        {% endif %}
                        
                        {% if entity.url %}
                        <div class="mb-3">
                            <strong class="text-muted">Details:</strong>
                            <a href="{{ entity.url }}" target="_blank" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-external-link-alt me-1"></i>View Details
                            </a>
                        </div>
                        {% endif %}
                        
                        {% if entity.data_entity %}
                        <div class="mb-2">
                            <small class="text-muted">Entity ID: {{ entity.data_entity }}</small>
                        </div>
                        {% endif %}
                        
                        {% if entity.tracking_id %}
                        <div class="mb-2">
                            <small class="text-muted">Tracking: {{ entity.tracking_id }}</small>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% else %}
<div class="row">
    <div class="col-12">
        <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle me-2"></i>
            No blacklisted entities found for the selected country.
        </div>
    </div>
</div>
{% endif %}

<!-- Pagination Info -->
{% if blacklisted_companies_data and blacklisted_companies_data.pagination and blacklisted_companies_data.pagination.has_pagination %}
<div class="row mt-4">
    <div class="col-12">
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>Note:</strong> This data shows results from page 1. There are {{ blacklisted_companies_data.pagination.total_pages }} total pages available.
        </div>
    </div>
</div>
{% endif %}

{% else %}
<!-- No Data Available -->
<div class="row">
    <div class="col-12">
        <div class="alert alert-warning">
            <i class="fas fa-exclamation-triangle me-2"></i>
            No blacklisted companies data is available. Please try generating the report again.
        </div>
    </div>
</div>
{% endif %}

<!-- Disclaimer -->
<div class="row mt-5">
    <div class="col-12">
        <div class="card border-warning">
            <div class="card-body">
                <h6 class="card-title text-warning">
                    <i class="fas fa-exclamation-triangle me-2"></i>Important Disclaimer
                </h6>
                <p class="card-text small mb-0">
                    This information is provided for informational purposes only. The blacklist data is sourced from various government and international organizations. 
                    Users should verify this information independently and consult with legal professionals before making business decisions. 
                    The accuracy and completeness of this data cannot be guaranteed.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
